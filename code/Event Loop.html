<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <!-- <script>
    new Promise((resolve) => {
      console.log('new Promise(macro task 1)');
      resolve();
    }).then(() => {
      console.log('micro task 1');
      setTimeout(() => {
        console.log('setTimeout1');
      }, 500)
    })

    setTimeout(() => {
      console.log('setTimeout2');
    }, 100)

    console.log('========== 结束==========');

    // new Promise(macro task 1  
    // ========== 结束========== 
    // micro task 1  
    // setTimeout2 
    // setTimeout1
  </script> -->

  <!-- <script>
    async function f1() {
      await f2()
      console.log('f1结束')
    }
    async function f2() {
      await f3()
      console.log('f2结束')
    }
    async function f3() {
      console.log('f3结束')
    }
    f1()
    new Promise(res => {
      console.log('new Promise')
      res()
    }).then(res => {
      console.log('promise第一个then')
    }).then(res => {
      console.log('promise第二个then')
    })
    // f3结束
    // new Promise
    // f2结束
    // promise第一个then
    // f1结束
    // promise第二个then
  </script>
  <script>
    // f1跟f2里面的await返回都是promise,所以我们可以转换成promise
    async function f1() {
      //await f2()
      //console.log('f1结束')
      new Promise((resolve, reject) => resolve(f2())).then(() => {
        console.log('f1结束')
      })
    }
    async function f2() {
      //await f3()
      //console.log('f2结束')
      new Promise((resolve, reject) => resolve(f3())).then(() => {
        console.log('f2结束')
      })
    }
    async function f3() {
      console.log('f3结束')
    }
    f1()
    new Promise(res => {
      console.log('new Promise')
      res()
    }).then(res => {
      console.log('promise第一个then')
    }).then(res => {
      console.log('promise第二个then')
    })
  </script> -->

  <!-- <script>
    console.log('1');

    setTimeout(function () {
      console.log('2');
      Promise.resolve().then(function () {
        console.log('3');
      })
      new Promise(function (resolve) {
        console.log('4');
        resolve();
      }).then(function () {
        console.log('5')
      })
    })
    Promise.resolve().then(function () {
      console.log('6');
    })
    new Promise(function (resolve) {
      console.log('7');
      resolve();
    }).then(function () {
      console.log('8')
    })

    setTimeout(function () {
      console.log('9');
      Promise.resolve().then(function () {
        console.log('10');
      })
      new Promise(function (resolve) {
        console.log('11');
        resolve();
      }).then(function () {
        console.log('12')
      })
    })

    // 1 7 6  8 2 4 3 5 9 11  10 12

  </script> -->

  <!-- <script>
    function test() {
      console.log(1);
      setTimeout(() => {
        console.log(2);

      }, 1000)

    }
    test();

    setTimeout(function () {
      console.log(3);

    })

    new Promise(function (resolve) {
      console.log(4);
      setTimeout(function () {
        console.log(5);

      }, 100)
      resolve();
    }).then(function () {
      setTimeout(function () {
        console.log(6);
      }, 0)
      console.log(7);
    })

    console.log(8);

    //1 4 8 7 3 6 5 2

    
  </script>  -->

  <script>
    setTimeout(() => console.log('setTimeout1'), 0); //1宏任务
    setTimeout(() => { //2宏任务
      console.log('setTimeout2');
      Promise.resolve().then(() => {
        console.log('promise3');
        Promise.resolve().then(() => {
          console.log('promise4');
        })
        console.log(5)
      })
      setTimeout(() => console.log('setTimeout4'), 0); //4宏任务
    }, 0);
    setTimeout(() => console.log('setTimeout3'), 0); //3宏任务
    Promise.resolve().then(() => { //1微任务
      console.log('promise1');
    })
  </script>
</body>

</html>